<div style="margin-top: 50px; height:calc(100% - 160px);"
  (document:keydown.meta.shift.s)="submit()"
  (document:keydown.esc)="cancelEdit()">

  <div style="display:flex;">
    <span class="center" style="font-size:28px;margin: 6px 0px 6px 0px;" style="font-size:32px;flex-grow:1;">{{ title }}</span>
    <button *ngIf="!shared" class="btn btn-default btn-primary" (click)="shareDocument()"><i class="fas fa-share"></i> Share</button>
    <button *ngIf="shared" class="btn btn-default btn-primary" (click)="copyLinkToClipBoard()" style="margin-right:4px;"><i class="fas fa-link"></i>
      <span id="custom-tooltip" style="z-index:3;position:fixed;">copied!</span>
    </button>
    <button *ngIf="shared" class="btn btn-default btn-primary" (click)="unshareDocument()"><i class="fa-solid fa-circle-stop"></i> Stop Share</button>
  </div>

  <textarea *ngIf="editorMode && showPreview" class="variable-textarea" [(ngModel)]="content" style="resize:none;margin-top:4px;" (keydown)="onKeydown($event)"></textarea>
  <textarea *ngIf="editorMode && !showPreview" class="variable-textarea" [(ngModel)]="content" style="width:100%;resize:none;margin-top:4px;" (keydown)="onKeydown($event)"></textarea>
  <markdown *ngIf="showPreview && editorMode" class="variable-binding" [data]="content" style="height: 100%; overflow-y: scroll;margin-top:4px;"></markdown>
  <markdown *ngIf="!editorMode" class="variable-binding" [data]="content" style="width: 100%;height: 100%; overflow-y: scroll;margin-bottom:4px;"></markdown>

</div>

<div class="center" style="position:absolute;bottom:12px;width:calc(100% - 264px);transition:0.5s;"
  [style.transform]="showSidebar ? 'translateX(-8px)' : 'translateX(90px)'">
  <button *ngIf="editorMode" class="btn btn-default btn-primary" (click)="togglePreviewPanel()">
    <i [ngClass]="showPreview ? 'fa-solid fa-eye-slash' : 'fa-solid fa-magnifying-glass'"></i>
      {{ showPreview ? 'Preview' : 'Preview' }}
  </button>
  &nbsp;&nbsp;
  <button class="btn btn-default btn-primary" (click)="changeMode()">
    <i [ngClass]="editorMode ? 'fa-solid fa-xmark' : 'fa-solid fa-pen-to-square'"></i>
      {{ editorMode ? 'Cancel Edit' : 'Edit' }}
  </button>
  &nbsp;&nbsp;
  <button *ngIf="editorMode" class="btn btn-default btn-primary" (click)="undoChanges()"><i class="fa-solid fa-undo"></i> Undo</button>
  &nbsp;&nbsp;
</div>

<div id="snackbar" [ngClass]="{'show': showSnackbar}">Saved <i class="fa-solid fa-check"></i></div>